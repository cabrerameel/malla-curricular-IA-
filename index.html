<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Malla Curricular Interactiva</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 1em; }
    .course { border: 1px solid #ccc; margin: 0.5em 0; padding: 0.5em; border-radius: 5px; }
    .locked { background: #eee; color: #999; }
    .unlocked { background: #cff; cursor: pointer; }
    .completed { background: #8f8; text-decoration: line-through; }
  </style>
</head>
<body>
  <h1>Malla Curricular Interactiva</h1>

  <div id="courses"></div>

  <script>
    // Definimos los cursos y sus prerrequisitos
    const courses = [
      { id: 'ingles1', name: 'Inglés 1', prereqs: [] },
      { id: 'introCalculo', name: 'Introducción al cálculo', prereqs: [] },
      { id: 'calcDifInt', name: 'Cálculo diferencial integral', prereqs: ['introCalculo'] },
      { id: 'quimGen1', name: 'Química general 1', prereqs: [] },
      { id: 'quimGen2', name: 'Química general 2', prereqs: ['quimGen1'] },
      { id: 'mecanica', name: 'Mecánica', prereqs: [] },
      { id: 'electromagnetismo', name: 'Electromagnetismo', prereqs: ['mecanica','introCalculo'] },
      { id: 'biologia', name: 'Biología general', prereqs: [] },
      { id: 'iai1', name: 'Introducción a la Ingeniería en Alimentos 1', prereqs: [] },
      { id: 'iai2', name: 'Introducción a la Ingeniería en Alimentos 2', prereqs: ['iai1'] },

      // Tercer semestre
      { id: 'ingles2', name: 'Inglés 2', prereqs: ['ingles1'] },
      { id: 'ingles3', name: 'Inglés 3', prereqs: ['ingles1', 'ingles2'] },
      { id: 'calcMult', name: 'Cálculo multivariado', prereqs: ['calcDifInt', 'introCalculo'] },
      { id: 'estadistica', name: 'Estadística y análisis de datos', prereqs: ['calcDifInt'] },
      { id: 'quimOrgan1', name: 'Química orgánica 1', prereqs: ['quimGen2'] },
      { id: 'quimAnal1', name: 'Química analítica 1', prereqs: ['quimGen2'] },
      { id: 'labOrganica', name: 'Laboratorio de orgánica', prereqs: ['quimGen2', 'quimOrgan1'] },
      { id: 'comOralEscrita', name: 'Comunicación oral y escrita', prereqs: ['iai1', 'iai2'] },
    ];

    // Estado de los cursos: 'locked', 'unlocked', 'completed'
    let state = {};

    // Inicializamos el estado
    function initState() {
      courses.forEach(c => {
        state[c.id] = 'locked';
      });
      updateUnlocks();
    }

    // Revisa si los prereqs están completados
    function canUnlock(course) {
      return course.prereqs.every(pr => state[pr] === 'completed');
    }

    // Actualiza el estado desbloqueado según prereqs
    function updateUnlocks() {
      courses.forEach(c => {
        if(state[c.id] !== 'completed' && canUnlock(c)) {
          state[c.id] = 'unlocked';
        }
      });
      renderCourses();
    }

    // Cambia estado a completado o no
    function toggleComplete(id) {
      if(state[id] === 'unlocked') {
        state[id] = 'completed';
      } else if(state[id] === 'completed') {
        state[id] = 'unlocked';
      }
      updateUnlocks();
    }

    // Renderiza los cursos en la página
    function renderCourses() {
      const container = document.getElementById('courses');
      container.innerHTML = '';
      courses.forEach(c => {
        const div = document.createElement('div');
        div.className = 'course ' + state[c.id];
        div.textContent = c.name;
        if(state[c.id] === 'unlocked' || state[c.id] === 'completed') {
          div.style.cursor = 'pointer';
          div.onclick = () => toggleComplete(c.id);
        }
        container.appendChild(div);
      });
    }

    // Inicio
    initState();

  </script>
</body>
</html>
